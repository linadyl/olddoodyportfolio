"use client";

import { useState, useEffect } from 'react';
import { motion } from 'motion/react';

const WigglingAsciiBackground = ({ asciiArt }: { asciiArt?: string }) => {
  const [scrollPosition, setScrollPosition] = useState(0);
  const [isMobile, setIsMobile] = useState(false);
  
  const defaultDesktopAsciiArt = `

                                                                                                  
                                            













                                                                                                                                                                                                                                                                                              
                                            .                                                                                                                                                                                                     
                                            .::.:---.::.::                                                                                                                                                                                             
                                          .:-=-==----------:-..                                                                                                                                                                                       
                                          .---=--=--------------:                                                                                                                                                                                      
                                          --------=---=-----:=--=---:.                                                                                                                                                                                 
                                          .---==-----:--=--=-::---------.:                                                                                                                             :.::....:.:.                                     
                                          ::===-----::-:-:-----------: ----:                                                                                                                    .:.:-------::-:--- .:                                   
                                          .:::-=--------::::---------::::----:--                                                                                                             .---:------::-----::-:----.                                 
                                          .:-------:-----::::::::-::------:::::-: :..                                                                                                    ::-:::---:::--::::--:---:-:---.                                 
                                          ..-====-----:. .::--  ::--------::::::: :.:-                                                                                              ...-:::-:::--::-:-:::::--:--:-:---:-                                 
                                          :-===--::--:....::::-------::::--:::::::.::--.                                                                                       ::.-:::::--::----:::-:..:::.::::.-:-:-::                                 
                                          :------::--::::::::--------::-:.:::----:::.::-- .                                                                                .::-..:::----:-----:    ......:::-::.:----::                                 
                                          ..-------::::-:::-:-:---:-::::-....:::-- ....:::.-:...                                                                        :::::..::.:--=---:-:       ...:::::.::-:-:---:.                                  
                                          ..-------:.:..   ....:--.::::::....:.::.    .::-:-:--:                                                                     .-:::::::::.:----:---:..  . :--.  .:.....-:-::::.                                   
                                          .-------::...      .:::::::::::.:::..         :..:-:-:..                                                               .:---. .:::::::-::.-:-::::::----::       .::::-:--:::.                                 
                                          .:--=-----::::::::: .:---:::-::::..:::..            .--:-:.                                                          .-...:--....-::.:....:::.::-----:           .:::--::::::                                  
                                          ---=----.:::.::.:-:::-------:--:::: :--:.           :-----:..                                                     :::::.::-:..:..  ..-:-----..---::..    .:..  ..:::::.: ::.                                  
                                          . :---::-:.         .-:---::--:.--.-::::--: .::.        .----::.                                                  .: :-:-.:::             .......-::::::::  :       ..  :.::-.                                   
                                          .:-=::--::.         .::--.:::::---:-----:     .....     .------:              .              .                 ::-:--.  .                .. :..::-::::-::         . .:::.:-:.                                   
                                          :-------:..         .:-: .:....:::::-----        ::::  ..---::---:           .              .              . ----:--                :::...--:-:--:.::::..    :   ...::---::.                                   
                                          :---------:.....    :::::.....:...  ::---.         .--:..----------:         .              .           ..--------:           .......:::: :::..:-:::::-:::-:-::-::.:---:::.                                    
                                          :--------:::---::....::::::: ...      .:---:..       .:-----.:::-::-::        .            .          .:-------:-:      ..   ...    .:::.::..:--::.:.:-..::::   ... ::-::-.                                    
                                          .-------::    ... ::..:-:--:::..        ....--:...    ..:::..  ::-----.       .            .        .:::::-:-::--   ...:.       . :-.:-::          .  .: :...       ::--::.                                    
                                          .:---:---:..           ...:..::::::-:.:.   .:-:--:       ..::    :-=---:       .           .       --:--:::-. :--:...         .::    .               .   .. .       ..:---:                                    
                                          .:------::.                   . ...:::.::::::::-:-:-. ...:---.  .:: :--:       .         .      .-:-----.....---:           ..:                           . .      :--. ..                                    
                                          :----:--::.     .             .... . -:::::::-::-::. :--::--:     .:--:.      .        .      :------:..   --         .:.. .        .              .   .  .     ..:::-::.                                    
                                          ..-------:------:---::::--::-   ... ...:: :.::-----:. ...-----.     :---::      .      .     .----:::.    .--.       :::.... .... :-.::...:...   .  :     ... .....::::-::                                    
                                          :-----:----------.:-::-:.---::------::...:::.:::::--:  ..-=-:=-   ..----:     .      .    :-----::.    :::. :---:...:--:--:-:-:-::.:..                           -:--::.                                    
                                          :---------::::.:::.     .      ::.:------.::::-::--::-:.  :. .-:..  .----.     .   .    .:-----.      .:::.       ..--::: :-..::..                             . ::::::                                     
                                            .:---:-:::::.:.:::                ..:--: :::---:-----::       .--:.  :--:..   :  . .   :--:--:      .:       .   ..--::::.::.::                              .::::-::.                                     
                                              .::--:::::....::.-..               :-.     ...-----::-.     ..:... .:---.   .::..   :---::.    ..         ::::----:.::::.:-:..                           ..::--::...                                     
                                                :-:::-:::....:.::--:               :--..     . .::-:.:..     .:..::---::::----:.::---: .   ..         ..:--::::-::::::::..:    .   ..  .               ..:----::                                       
                                                ::.:--:-::::::::::::::.              .:..        ...--:.     .:-: ::-:::------::-:--::.:          .::: :-------::-:----:..                 ..:-::::-:----:::::                                        
                                                ..-:-------:...           : .        .::-:-:.       .--.:.  . .:...::-:---::::-------::.         .:--. .:. .      .:-::                      ..::--:--:-:::::..                                       
                                                  . .::-----::-:... .      .:.:::::-:--:----..:--::.::. .--::: ..::.::-:-:::-----::-:..      .:-:::.            .::-:                      . .--::..:-:::--:.                                         
                                                        ...:::-------:..     . :---:-:.:.:..::.-:---::------:::::  ::.:--::::----:::.   ..-::..:..            ...:                       ::.::..::::::--::::..                                         
                                                            :----:::-:-----------::-::-:-::::-:::---::---::::--::::..:---:..::::-...-:..:::. :::::::-:::----:...                     :::.::.:::::.-::-::::.                                            
                                                          :-----::::::.:---.-------==---------------:-----::--:---:--=:-:  :::--:::-::::-:-:::-:-:-------. .::::.. ..     .  .:.:..::  ..:.::.:::::::::.                                              
                                                        .::------:::::: .:::...::::------:--:::----:-:-:--:.--:.-:::--::::-::--::::::-:--:--::---::::...:: .. .      .::-::::::.          .....::::: :.                                                
                                                      --::::::-::--::::::::.::::::::  :::--:. :.:........ ..:::-:::::---:-:---:.:.-::::-:.-:-:----:-::::--:...       ::.                . .:.: . .                                                    
                                                      :--:::::-:::::------:--:---::--::-:.:------:....:..::::-::-:::::----:--:-:::...::-:         . . -::::--.:::-::::...:..   ::-: ..:::.::::.                                                        
                                                    .----::------.. ..:::-:  :::::-.... . ...:::::::--::--:--    :-::---:.::::--:.    :-. ::.:.           .::.:..:....::: .::::. ....::.                                                              
                                                  :--:----::-::.                      . .::::---::---:..:-:..  ..:-::----:.:::::..     ..:---..:::..:.   ...     ..         ..                                                                        
                                                  .-:---:.                           ..::------::: ..  ::..     .::..::---:.:::::: :     .--:::     .    .-:::.:.                      ....:                                                           
                                                  -------:.                     . .:-::--..:.       .::.      :.:...:.:-:::::::::...:      :--:.:::.     ....:.:::...  .         . ......:..-:.                                                        
                                                .:--:.  .:.   :.::..:..:::.::...::-=---...         .--.     .:.... ...:-:-.:::--:  ..:..    ..:   ..:.   .. .     ..:.... ::::::.:::  ..::::--:..                                                      
                                              :.--::.:      .   ..      .     .:-:-:..        .::--:.    .:-=-:.  ...--:--:::-:  .   .       ..       :-:-                     .::. .-::-:::-::                                                       
                                              :----: .   ...    . .          .:--:. ..... .:---.:::   ..:.:-- ..  ...:-:------:                -:.       :  ...                    :::::::--:::::.                                                    
                                              .:----.... .::-... ..           ::::....:-::...:::..:.  .::..-:.     ...:--:.::-::.       ..      .---          .:::.                    :::::::-::.:                                                    
                                              .---::.:::  .  ...  .          :----..  . .. ..:-:.  .:-::..:-..    ..-:--:-:.:::...      :.  .    .:-:..         :.-:. ...                ..:-----:::                                                   
                                                --:..:.        .            .: ..       .... :: ..:... . .--..   ..   .:-::.:: ...      ::: :.    :-:::::.        :.  . :. .                 .::.:..                                                   
                                              .:---:.                        :            .-::---:.  .:-----:.   ..  ..---.:-::   :    .:-:..       :::-::..        :..        ... .:.       .    ..:                                                  
                                            ..----:.                    .    .::.  .....::.:: .     ::--:-:--  :-.     ::-...:.         :.. :     ...:::. ..:.-::    ::        .                    ..                                                 
                                            .--:.             ...:: .::.      .. ...      .      .:.--..:---  ..      :--.:.:      ..      .-     ...-:.     .:::                 ..                ..                                                
                                              :-:             ..:--  .                              .-:.   ::.         .:-:::.      ... .    ::-.  ...:-:. .                                      :::--.                                               
                                              .:-          .:-----:                                ..:.   .-:          ::- ..           :.   .....    .-:--..          :.               ..:        ..-:.                                               
                                              .-:        .----:-::.       .                      :--.    ..     :     ::-::            -.    ..   ::    :-:  .          .                  ....     ..                                                
                                                ::.   ..:-:.:.:....                    .:-:     .:--     .:.   ..      :--.            .      .   ..:.   ... .:..:. ..                       .  .   .                                                 
                                                .::..  .:. :..   .. .     .::       ....-      .::..    :.     .        ..              :      .   ..--.          .        .                      .:.                                                 
                                                  :-..:::   .         ..---..     ..:: ..   :. ...    :::.    ...                       :      .     ::                      :                     ..                                                 
                                                    :: .::.            .--.      .  :-. ::::..  .     .-:.   ..:                                .                              .                     .                                                 
                                                        .:-:.        ....          .--:::..  . :    ...      :                            .:     ..      ...                      .                 ..                                                 
                                                          :-:      ....          .----:  .   .::   . .       :                      .     .::    :-.       ..                  ..            .....  .                                                  
                                                          .---..  .:.            .:..        :.     .       .                        :.     .   .:::-:     ...        .              ..      .   :.-:                                                  
                                                          ::--..:: .          .....       .::.   .:.     ..                          .     ::.  .:....      ..       .                           ::                                                   
                                                            ..:----.           ...        .--.    -:    .::                            :    .-.    ..   .-::  :                    .    ..      ..                                                     
                                                              ..::..         .           :-..   -:....:.-.                            ::.  ...    ...   .-::...         .          ..      .....                                                      
                                                                  ::...      .:.         :::-.  :.  ..:-...                            .::.   ::    :.     .:-..:                    .     ... .                                                       
                                                                  ....      .:       ...:-::..--: ..:-.                                 :..  .-:  ....      ---.:.          :.                                                                        
                                                                      ...  .:-.        .--.:---::::..                                    :-...      ::.     .:. ..           .        . :.:                                                           
                                                                        .   ...    ....---:-::::--:                                       .::       .:         ::-                    :--.                                                            
                                                                              .. .......:--:..--:                                          .:        .          .: .          .      .:.                                                              
                                                                                        .::  :                                              :::  .: ..:         ..            .:-::.::                                                                
                                                                                                                                              :..--.  ..        ..           ...:::                                                                   
                                                                                                                                                ....   .                    .:.                                                                       
                                                                                                                                                  .   ..          .  .   ::::.                                                                        
                                                                                                                                                      ... ... . ...                                                                                    
                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                      


  `;
  
  // Custom smaller ASCII art for mobile
  const mobileAsciiArt = `

                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                   .                                                                                
                 :=+===-                                                                            
                -+++=+++++=:                                                                        
                -++==:-==+=.-=-                                             :-===++=-:              
                =*==- :-.-=-=:-..-                                      .:-=+-----=:==.             
                =++==:::----:.:-..::                                .::--=+.  ..:.--=:              
                -++-.   -:-:.-:    .-=.                         .--.:::.-=-:+:.  .:==-.             
                +--.   --:+-----.:   .=-.                     ..:: .  .-:.-:..:. ..:::              
               .+=+.    - :.:.=-.   -..--+.                 --=      ::.:-=:-. ...:=-.              
               .=+=...:::::.    :-.   -=.:--             :-=.:  :    :: .- ..::. ..--               
                --=-.       ..:.:::-- .:= : =.      .  ===. +-     :           .  .-.               
                .+=:=====---:- ...:-::.-+.. -=        ==:  :.::.::::-:-.:     ... .-=.              
                 .=--:.:.      .-.:-.-=:  .-.::.  .. +=:  :    .=::::            :.=-               
                   ::=:-:--.     ...  .:..  ::==:+--=-      :-=::::::. ...:.....----                
                    .:==--:.  ..-:---.=-:.-::.:---==--.  ::.     ::         .--.-::                 
                       .+--==+-*===+=-==-=:---.+= :--=-:--=-==:-:       -.:::::::                   
                     .----=---.-:- .=....: ::--=+-=:.:-.-:=---:.   :       .. .                     
                    .==-==.  . .  . :.-==..- .-==.=-. ..:-:.  .. .. ..   .                          
                   .==:          -::..  :.  :..:=:--..  -.:.  .:::..   .....:                       
                  :=:.    .    .-:   .::  ::...:===..    ..  -:        ..===-.                      
                  --.:  . .   .--....:..-...  .-=.=.   .. .-.   :-..       :+=:                     
                  =-.             . ::: :+=: .  +.::. .:.   =-:.. :      .                          
                  -     .:-.            -  :    -..  .   - .::.          .    ..:                   
                   :   ::-.        ..  ::  . :  --     . . :  :.             .                      
                    :.: .   .-:  ..  ... :.  .         .  . ..        .        .                    
                      .:   .    .-:.... :   .           : .   .              . .                    
                       ::..     ..  .: .  .          .  ..:.:  .   .     ..   .                     
                          :.   .   .-....-:           :  - .....         . . :                      
                            . ..   -.=:::               ..  -  ...    .    :                        
                                 ..:-::                 :.. ..   :    ...:.                         
                                                          .. .   ..   :                             
                                                             :.:                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    

`;
  
  // Use the provided art or the defaults
  const desktopArtToRender = asciiArt || defaultDesktopAsciiArt;
  
  // Check if mobile
  useEffect(() => {
    const checkMobile = () => {
      setIsMobile(window.innerWidth < 768);
    };
    
    // Initial check
    checkMobile();
    
    // Add event listener for window resize
    window.addEventListener('resize', checkMobile);
    
    // Cleanup
    return () => window.removeEventListener('resize', checkMobile);
  }, []);
  
  useEffect(() => {
    const handleScroll = () => {
      setScrollPosition(window.scrollY);
    };
    
    window.addEventListener('scroll', handleScroll);
    
    return () => {
      window.removeEventListener('scroll', handleScroll);
    };
  }, []);

  const renderWigglingLines = () => {
    // Use different ASCII art based on device
    const artToUse = isMobile ? mobileAsciiArt : desktopArtToRender;
    const lines = artToUse.split('\n');
    
    return lines.map((line, index) => (
      <motion.div 
        key={index}
        initial={{ x: 0 }}
        animate={{ 
          x: Math.sin((scrollPosition / 50) + (index * 0.2)) * (isMobile ? 3 : 15)
        }}
        transition={{ 
          type: "tween", 
          ease: "easeOut",
          duration: 0.1 
        }}
        style={{
          fontSize: isMobile ? '8px' : '10px', 
          lineHeight: isMobile ? '8px' : '10px', 
          whiteSpace: 'pre',
        }}
        className="font-mono text-grey"
      >
        {line}
      </motion.div>
    ));
  };

  return (
    <div 
      className="fixed top-0 pointer-events-none"
      style={{ 
        width: isMobile ? '100%' : '70%',
        right: isMobile ? 'auto' : 0,
        left: isMobile ? '50%' : 'auto',
        transform: isMobile ? 'translateX(-50%)' : 'none', // Center horizontally on mobile
        textAlign: 'center', // Center text alignment
        zIndex: -1,
        opacity: isMobile ? 0.4 : 0.6,
        marginTop: isMobile ? '150px' : '0' // Push down a bit on mobile
      }}
    >
      {renderWigglingLines()}
    </div>
  );
};

export default WigglingAsciiBackground;